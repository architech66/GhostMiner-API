<!DOCTYPE html>
<html>
<head>
    <title>GhostMiner Admin Dashboard</title>
    <style>
        body { background: #161616; color: #fff; font-family: 'Segoe UI', sans-serif; }
        .box { max-width: 700px; margin: 40px auto; padding: 30px; background: #232323; border-radius: 8px; }
        h2 { color: #FF2222; text-align: center; }
        table { width: 100%; margin-top: 18px; border-collapse: collapse;}
        th, td { border-bottom: 1px solid #333; padding: 8px 5px; }
        th { color: #FF5555; }
        .add-form { margin: 24px 0 10px 0;}
        .add-form input[type=text], .add-form input[type=password] { margin-right: 8px; padding: 5px 8px; border-radius: 3px; border: none;}
        .add-form button { background: #FF2222; color: #fff; border: none; border-radius: 3px; padding: 5px 18px;}
        .online { color: #33ff55; }
        .section-title { margin-top: 30px; color: #FF5555;}
    </style>
</head>
<body>
    <div class="box">
        <h2>GhostMiner Admin Dashboard</h2>
        <form class="add-form" method="post" action="/admin/add_user">
            <input type="text" name="username" placeholder="Username" required>
            <input type="password" name="password" placeholder="Password" required>
            <input type="text" name="email" placeholder="Email">
            <input type="text" name="key" placeholder="Product Key (optional)">
            <label><input type="checkbox" name="is_admin"> Admin</label>
            <button type="submit">Add User</button>
        </form>
        <h3 class="section-title">Users</h3>
        <table>
            <tr><th>User</th><th>Email</th><th>Admin?</th><th>Product Key</th><th>Remove</th></tr>
            {% for u, v in users.items() %}
            <tr>
                <td>{{ u }}</td>
                <td>{{ v.email }}</td>
                <td>{{ "Yes" if v.is_admin else "No" }}</td>
                <td>{{ v.product_key }}</td>
                <td><a style="color:#FF5555" href="/admin/remove_user/{{ u }}">Remove</a></td>
            </tr>
            {% endfor %}
        </table>
        <h3 class="section-title">Online Apps</h3>
        <table>
            <tr><th>User</th><th>Last Seen</th><th>IP Address</th></tr>
            {% for u, v in online.items() %}
            <tr>
                <td>{{ u }}</td>
                <td class="online">{{ "%.0f" % (v.last_seen) }}</td>
                <td>{{ v.ip }}</td>
            </tr>
            {% endfor %}
        </table>
        <h3 class="section-title">Product Keys</h3>
        <a href="/admin/keys" style="color:#FF2222;">Manage Product Keys</a>
        <br><br>
        <a style="color:#FF2222;" href="/admin/logout">Logout</a>
    </div>
</body>
</html>
