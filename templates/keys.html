<!DOCTYPE html>
<html>
<head>
    <title>Product Key Management</title>
    <style>
        body { background: #161616; color: #fff; font-family: 'Segoe UI', sans-serif; }
        .box { max-width: 600px; margin: 40px auto; padding: 30px; background: #232323; border-radius: 8px; }
        h2 { color: #FF2222; text-align: center; }
        table { width: 100%; margin-top: 18px; border-collapse: collapse;}
        th, td { border-bottom: 1px solid #333; padding: 8px 5px; }
        th { color: #FF5555; }
        .add-form { margin: 24px 0 10px 0;}
        .add-form input[type=text], .add-form input[type=number] { margin-right: 8px; padding: 5px 8px; border-radius: 3px; border: none;}
        .add-form button { background: #FF2222; color: #fff; border: none; border-radius: 3px; padding: 5px 18px;}
        .inactive { color: #999; }
    </style>
</head>
<body>
    <div class="box">
        <h2>Product Key Management</h2>
        <form class="add-form" method="post">
            <input type="text" name="category" placeholder="Category" required>
            <input type="number" name="duration" placeholder="Duration (days)" required>
            <button type="submit">Generate Key</button>
        </form>
        <table>
            <tr><th>Key</th><th>Category</th><th>Duration</th><th>Created</th><th>Assigned User</th><th>Active</th><th>Deactivate</th></tr>
            {% for k, v in keys.items() %}
            <tr class="{{ '' if v.active else 'inactive' }}">
                <td>{{ k }}</td>
                <td>{{ v.category }}</td>
                <td>{{ v.duration }}</td>
                <td>{{ v.created }}</td>
                <td>{{ v.assigned_user }}</td>
                <td>{{ "Yes" if v.active else "No" }}</td>
                <td>
                  {% if v.active %}
                    <a href="/admin/deactivate_key/{{ k }}" style="color:#FF5555;">Deactivate</a>
                  {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
        <a style="color:#FF2222;" href="/admin/dashboard">Back to Dashboard</a>
    </div>
</body>
</html>
